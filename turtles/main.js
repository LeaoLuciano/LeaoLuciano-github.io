(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var i;t.g.importScripts&&(i=t.g.location+"");var s=t.g.document;if(!i&&s&&(s.currentScript&&(i=s.currentScript.src),!i)){var e=s.getElementsByTagName("script");e.length&&(i=e[e.length-1].src)}if(!i)throw new Error("Automatic publicPath is not supported in this browser");i=i.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=i})();const i=t.p+"assets/body.svg",s=t.p+"assets/arm.svg",e=document.getElementById("canvas"),h=e.getContext("2d");class r{constructor(t=0,i=0){this.x=0,this.y=0,this.toString=()=>`(${this.x}, ${this.y})`,this.add=t=>(this.x+=t.x,this.y+=t.y,this),this.$add=t=>new r(this.x+t.x,this.y+t.y),this.sub=t=>(this.x-=t.x,this.y-=t.y,this),this.$sub=t=>new r(this.x-t.x,this.y-t.y),this.mul=t=>(this.x*=t,this.y*=t,this),this.$mul=t=>new r(this.x*t,this.y*t),this.div=t=>(this.x/=t,this.y/=t,this),this.$div=t=>new r(this.x/t,this.y/t),this.x=t,this.y=i}angle(){return Math.atan2(this.x,this.y)}normalized(){let t=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2));return t<r.ERR?(this.x=0,this.y=0,this):(this.x/=t,this.y/=t,this)}$normalized(){let t=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2));return t<r.ERR?new r:new r(this.x/t,this.y/t)}rotated(t){return[this.x,this.y]=[this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t)],this}}r.ERR=1e-10;class n{constructor(){this.position=new r(0,0),this.rotation=0,this.scale=new r(1,1),this.children=[]}_enter(t){this.ctx=t;for(let i of this.children)i._enter(t)}_process(t){h.save(),h.translate(this.position.x,this.position.y),h.rotate(this.rotation),this.children.map((i=>{i._process(t)})),h.restore()}add_child(t){this.children.push(t)}}class o extends n{get absolute_width(){return Math.abs(this.img.width)*this.scale.x}get absolute_height(){return Math.abs(this.img.width)*this.scale.y}_process(t){h.save(),h.rotate(this.rotation),h.translate(this.position.x-(this.scale.x<0?-1:1)*this.absolute_width/2,this.position.y-(this.scale.y<0?-1:1)*this.absolute_height/2),h.scale(this.scale.x<0?-1:1,this.scale.y<0?-1:1),h.drawImage(this.img,0,0,this.absolute_width,this.absolute_height),h.restore()}}const a=.5625;function c(){window.innerWidth*a<window.innerHeight?(e.width=window.innerWidth,e.height=e.width*a):(e.height=window.innerHeight,e.width=e.height/a),l()}function l(){h.fillStyle="gray",h.fillStyle="rgba(80, 80, 80, 1.0)",h.fillRect(0,0,e.width,e.height)}window.addEventListener("resize",c),c();class d extends n{constructor(){super(...arguments),this.velocity=new r(0,0),this.acceleration=new r(0,0)}_process(t){this.position.add(this.velocity.$mul(t)),this.velocity.add(this.acceleration.$mul(t)),super._process(t)}}class w extends d{constructor(){super(...arguments),this.radius=20,this.body=new o,this.arm=new o,this.arm2=new o,this.time=0,this.i=0,this.children=[this.body,this.arm,this.arm2]}_enter(t){this.body.img=new Image,this.arm.img=new Image,this.arm2.img=new Image,this.body.img.src=i,this.arm.img.src=s,this.arm2.img.src=s,this.body.scale.mul(.25),this.arm.scale.mul(.25),this.arm2.scale=new r(-.25,.25),super._enter(t)}_process(t){super._process(t),this.arm.rotation=.3*Math.sin(10*this.time)+.2,this.arm2.rotation=.3*Math.sin(10*this.time+Math.PI)-.2,this.time+=t;let i=m[(this.i+1)%u].position.$sub(this.position);this.velocity=i.$normalized().$mul(y),this.rotation=Math.PI-i.angle()}}const u=6,m=[],y=100,p=new n;p.ctx=h;const g=new r(640,360);for(let t=0;t<u;t++){let i=new w;i.i=t,i.position=g.$add(new r(350,0).rotated(2*t*Math.PI/u)),m.push(i),p.add_child(i)}!function(t){const i=1/30;t._enter(h),window.setTimeout((function s(){l(),h.save(),h.scale(e.width/1280,e.height/720),t._process(i),window.setTimeout(s,1e3*i),h.restore()}),1e3*i)}(p)})();
//# sourceMappingURL=main.js.map